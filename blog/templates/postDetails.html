{% extends "base.html" %} {% block content %}

<div class="container">
  <div>
    <img
      style="height: 450px"
      src="/media/{{story.image}}"
      class="w-100"
      alt="..."
    />
  </div>
  <div class="row mt-5">
    <div class="content-section col-8">
      <div class="mt-3">
        <h2>{{story.title | safe}}</h2>
      </div>

      <hr class="p-0 m-0" />
      <p class="description">{{story.description | safe}}</p>
    </div>
    <div class="col-4">
      <div class="fst-italic shadow-sm bg-light">
        <h3 class="px-3 pt-3">Related Content</h3>
        <hr />
        {% for story in stories|slice:":4" %}
        <div class="card-body">
          <h5 class="card-title">{{story.title }}</h5>
          <p class="card-text mb-0 pb-0">
            {{story.description|slice:"0:100" | safe }}
          </p>
          <a class="mb-0 pb-0" href="{% url 'postDetails' story.slug %}"
            >see more...</a
          >
        </div>

        {% endfor %}
      </div>
    </div>
  </div>
</div>
<hr />
<h4 class="container">comment section</h4>
<div class="container">
  <div class="d-flex align-items-center">
    <div class="m-3 d-flex align-items-center">
      {% if story.isLike == True and user.username %}
      <a href="{% url 'like_post' story.pk %}">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-heart-fill"
          style="color: red"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"
          /></svg
      ></a>

      {% elif story.isLike == False %}
      <a href="{% url 'like_post' story.pk %}">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-heart-fill"
          style="color: silver"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"
          />
        </svg>
      </a>

      {% endif %}
      <span class="badge text-bg-secondary">{{likeCount}} </span>
    </div>

    <div class="m-2">
      <a href="{% url 'add_bookmark' story.pk %}">
        <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-bookmark"
        viewBox="0 0 16 16"
      >
        <path
          d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z"
        />
      </svg>
      </a>
    </div>

    <form method="post" action="#">
      {% csrf_token %}
      <input name="comment" type="text" style="border: none" />
      <button type="submit" style="border: none">Submit</button>
    </form>
  </div>

  <div>
    <div>
      {% if reviews %} {% for review in reviews %}

      <div class="d-flex align-items-center">
        {% if review.user.profile.image.url %}
        <img
          src="{{ review.user.profile.image.url }}"
          alt="User Image"
          class="img-fluid rounded-circle mb-3 me-2"
          style="width: 50px; height: 50px"
        />
        {% else %}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          fill="currentColor"
          class="bi bi-person"
          viewBox="0 0 16 16"
        >
          <path
            d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664z"
          />
        </svg>
        {% endif %}
        <div>
          <b>{{ review.user.username }}</b>
          <p>{{ review.comment }}</p>
        </div>
      </div>
      {% endfor %}{% endif %}
    </div>
    {% endblock %}
  </div>
</div>
